#!/usr/bin/env php
<?php

require __DIR__ . '/../src/Composer/Composer.php';
require __DIR__ . '/../src/Package/Package.php';

use Cross\Cross\Cross;
use Cross\Composer\Composer;
use Cross\Package\Package;
use Symfony\Component\Console\Application;

// Application composer
$composer = new Composer(getcwd() . '/composer.json');

// Autoload
require getcwd() . '/' . $composer->getVendorDirectory() . '/autoload.php';

// Package
$package = new Package();

// Package composer
$composer = new Composer(__DIR__ . '/../composer.json');

// Application
$application = new Application($composer->getDescription(), $composer->getVersion());

// Cross
$cross = new Cross($application);
$cross->plugins($package->getPlugins());
$cross->commands($package->getCommands());
$cross->run();
